<!DOCTYPE html>
<html lang="en">

<head>
    <title>JuanFi - Status</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
	<link rel="stylesheet" href="style.css">
	<script>
		var loginError = "";
		var mac = "$(mac)";
	</script>
</head>

<body><!--BODY-->
<div class="container"><!--CONTAINER-->

		<form action="$(link-logout)" name="logout" >
			<input type="hidden" name="erase-cookie" value="true" />
		</form>
		
        <div class="row"><!--ROW-->

            <div class="col-lg-4 mx-auto"><!--COLUMN-->
				<section class="wrapper"><!--WRAPPER-->
					<div class="login"><!--LOGIN-->	

					<figure class="card shadow-none w-100"><!--LOGO-->
						<h3 class="mb-3">Welcome Guest!</h3>
						<img src="/dist/assets/images/juanfi.webp" class="card-img-top" alt="JuanFi Logo">
					</figure><!--LOGO-->

					<section class="card-body"><!--CLIENT INFO-->
						<ul class="list-group list-group-horizontal-md text-wrap w-100">
							<li><i class="bi bi-geo-alt-fill"></i>$(ip)</li>
							<li><i class="bi bi-pc-display"></i>$(mac)</li>
						</ul>
					</section><!--CLIENT INFO-->

					<!--CONNECTION STATUS-->
					<section id="status-connected">
						<button type="button" class="btn shadow-none w-100" disabled="disabled"><i class="bi bi-wifi"></i>CONNECTED</button>
					</section>
					<!--CONNECTION STATUS-->		

					<section class="container status"><!--STATUS-->
						<table class="table"><!--TABLE-->
							<tbody><!--TBODY-->
							<section id="voucher">  
								<tr>
								<td scope="row"><i class="bi bi-qr-code"></i>CODE
									<table>
										<tbody>
										<tr>
										<td class="col-2 text-center" colspan="4"><span>$(username)</span></td>
										</tr>
										</tbody>
									</table>
								</td>
								</tr>
							</section>

							<section id="time"><!--REMAINING TIME-->
							  	<tr>
								<td scope="row"><i class="bi bi-hourglass-split"></i>REMAINING TIME
									<table>
										<tbody>
										<tr>
										<td class="col-2 text-center" colspan="4"><span id="remainTime"></span></td>
										</tr>
										</tbody>
								  	</table>
								</td>	
							  	</tr>
							</section><!--REMAINING TIME-->
							
							<section id="time-remaining"><!--EXPIRATION TIME-->
							  <tr>
								<td scope="row"><i class="bi bi-stopwatch-fill"></i>EXPIRATION TIME
									<table>
										<tbody>
										<tr>
										  <td class="col-2 text-center" colspan="4"><span id="expirationTime"></span></td>
										</tr>
										</tbody>
								  	</table>
								</td>
							  </tr>
							<section><!--EXPIRATION TIME-->

							<section id="data-usage"><!--DATA USAGE-->
							  <tr>
								<td scope="row"><i class="bi bi-broadcast-pin"></i>DATA USAGE
									<table>
										<tbody>
										<tr>
										  <td class="col-2 text-center" colspan="4"><i class="bi bi-download"></i>$(bytes-in-nice)</td>
										  <td class="col-2 text-center" colspan="4"><i class="bi bi-upload"></i>$(bytes-out-nice)</td>
										</tr>
										</tbody>
								  	</table>
								</td>		
							  </tr>
							</section><!--DATA USAGE-->
							</tbody><!--TBODY-->
						  </table><!--TABLE-->
					</section><!--STATUS-->

					<div id="vendoSelectDiv" style="margin-top: 20px">
						<label for="exampleFormControlSelect2">Select Vendo: </label>
						<select class="form-control" name="vendoSelected" id="vendoSelected" >
						</select>
					</div>

					<!--EXTEND TIME-->
					<section id="insertcoin">
						<button type="button" id="insertBtn" onclick="insertBtnAction(); return false" class="btn wiggle shadow-none w-100" data-bs-toggle="modal" data-bs-target="#insertCoin">EXTEND TIME</button>

						<div class="modal fade" id="insertCoinModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="insertCoinModalTitle" aria-hidden="true"><!--MODAL FADE-->
						
						<div class="modal-dialog modal-dialog-centered"><!--MODAL DIALOG-->
						<div class="modal-content"><!--MODAL CONTENT-->
						<div class="modal-header"><!--MODAL HEADER-->
							<h5 class="modal-title" id="insertCoinModalTitle">PLEASE INSERT COIN</h5>
							<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
							
						</div><!--MODAL HEADER-->

						<div class="modal-body"><!--INSCOIN MODAL BODY-->
						<div class="progress" style="margin-bottom: 20px"><!--PROGRESS BAR-->
							<div id="progressDiv" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div>
						</div><!--PROGRESS BAR-->
										
						<section class="container"><!--INSCOIN-->
							<table class="table"><!--TABLE-->
								<thead><!--THEAD-->
									<tr>
									<th scope="col" class="text-center">TRANSACTION INFORMATION</th>
									</tr>
								</thead><!--THEAD-->
								<tbody><!--TBODY-->
								<tr>
									<td scope="row"><i class="bi bi-qr-code"></i>CODE: 
										<span id="codeGeneratedBlock">
											<span id="codeGenerated">*****</span>
										</span>
									</td>
								</tr>
								<tr>
									<td scope="row"><i class="bi bi-cash-stack"></i>COINS: â‚±<span id="totalCoin">0</span>.00</span></td>
								</tr>
								<tr>
									<td scope="row"><i class="bi bi-broadcast-pin"></i>DATA: <span id="totalData">0</span>MB</td>
								</tr>
								<tr>
									<td scope="row"><i class="bi bi-hourglass-split"></i>TIME AVAILED</td>
								</tr>
								<tr>
									<td scope="row" class="text-center"><span id="totalTime"></span></td>
								</tr>
								</tbody><!--TBODY-->
							</table><!--TABLE-->
						</section><!--INSCOIN-->
						</div><!--INSCOIN MODAL BODY-->

						<div class="modal-footer"><!--MODAL FOOTER-->
							<button type="button" id="saveVoucherButton" data-save-type="extend" onclick="saveVoucherBtnAction(); return false" class="btn btn-primary" data-dismiss="modal">
								Save and Connect
							  </button>
							<button type="button" id="cncl" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
						</div><!--MODAL FOOTER-->
						</div><!--MODAL CONTENT-->
						</div><!--MODAL DIALOG-->
						</div><!--MODAL FADE-->
					</section>
					<!--EXTEND TIME-->

					<!--PROMORATES-->
					<section id="promorates">
						<button type="button" onclick="promoBtnAction(); return false" class="btn shadow-none w-100" data-bs-toggle="modal" data-bs-target="#promoRates">
							PROMO RATES
						</button>

						<div class="modal fade" id="promoRatesModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true"><!--MODAL FADE-->
						<div class="modal-dialog modal-dialog-centered"><!--MODAL DIALOG-->
						<div class="modal-content"><!--MODAL CONTENT-->
						<div class="modal-header"><!--MODAL HEADER-->
							<h5 class="modal-title" id="staticBackdropLabel">PROMO RATES</h5>
							<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
						</div><!--MODAL HEADER-->
						
						<div class="modal-body"><!--MODAL BODY-->
							<div class="container"><!--MODAL CONTAINER-->
								<div class="row"><!--MODAL ROW-->
									<table class="table">
										<thead>
										  <tr>
											<th scope="col">Rates</th>
											<th scope="col">Validity(Expiration)</th>
										  </tr>
										</thead>
										<tbody id="ratesBody">
										  <tr>
											<td id="totalTime">Rates loading....</td>
										  </tr>
										</tbody>
									  </table>
								  </div><!--MODAL ROW-->
							</div><!--MODAL CONTAINER-->
						</div><!--MODAL BODY-->
						
						<div class="modal-footer"><!--MODAL FOOTER-->
							<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
						</div><!--MODAL FOOTER-->

						</div><!--MODAL CONTENT-->
						</div><!--MODAL DIALOG-->
						</div><!--MODAL FADE-->
					</section>
					<!--PROMORATES-->	

					<!--LOGOUT-->
					<section id="status-disconnected">
						<button type="button" onClick="document.logout.submit();" class="btn shadow-none w-100" data-bs-toggle="modal">LOGOUT</button>
					</section>
					<!--LOGOUT-->	

					</div><!--LOGIN-->
				</section><!--WRAPPER-->
            </div><!--COLUMN-->

			<script>
				var sessiontime = "$(session-time-left-secs)";
				var uptime = "$(uptime-secs)";
				var currentVoucher = "$(username)";
				window.name="hotspot_status";
				
				$(document).ready(function(){
					voucher = currentVoucher;
					var validity = getStorageValue(voucher+"validity");
					if(validity != null){
						$("#expirationTime").html(new Date(parseInt(validity)));
					}
					var time = sessiontime;
					$("#remainTime").html(secondsToDhms(time));
					var zz = setInterval(function(){
						time--;
						$("#remainTime").html(secondsToDhms(time));
						if(time <= 0){
							$.toast({
								title: 'Success',
								content: 'Time limit exceeded, Thank you for the purchase, will be logout shortly',
								type: 'success',
								delay: 5000
							});
							clearInterval(zz);
							setTimeout(function(){
								document.logout.submit();
							}, 6000);
						}
					}, 1000);
					
				});
				
				$(if refresh-timeout)
					setInterval(function(){
						if(!insertingCoin){
							location.reload();
						}
					}, $(refresh-timeout-secs) * 1000);
				$(endif)
			</script>

			<script src="/dist/assets/js/bundle.min.js"></script>
			<!--LOADER-->
			<div id="loaderDiv" class="spinner hidden">
				<div class="spinner-grow text-success" role="status">
					<span class="visually-hidden">Loading...</span>
				</div>
			</div>
			<!--LOADER-->
		</div><!--ROW-->
</div><!--CONTAINER-->
</body><!--BODY-->
</html>